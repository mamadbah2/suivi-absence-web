<div class="ism-details-container">
  <div class="ism-details-header">
    <h1>Détails de l'absence</h1>
    <button class="ism-back-btn" (click)="retour()">Retour</button>
  </div>

  <div *ngIf="loading" class="ism-loading">
    Chargement...
  </div>

  <div *ngIf="error" class="ism-error">
    Une erreur est survenue lors du chargement des détails.
  </div>

  <div *ngIf="!loading && !error && absence" class="ism-details-content">
    <div class="ism-details-section">
      <h2>Informations de l'étudiant</h2>
      <div class="ism-details-grid">
        <div class="ism-details-item">
          <span class="ism-details-label">Matricule</span>
          <span class="ism-details-value">{{ absence.id }}</span>
        </div>
        <div class="ism-details-item">
          <span class="ism-details-label">Nom</span>
          <span class="ism-details-value">{{ absence.nom }}</span>
        </div>
        <div class="ism-details-item">
          <span class="ism-details-label">Prénom</span>
          <span class="ism-details-value">{{ absence.prenom }}</span>
        </div>
        <div class="ism-details-item">
          <span class="ism-details-label">Classe</span>
          <span class="ism-details-value">{{ absence.classe }}</span>
        </div>
      </div>
    </div>

    <div class="ism-details-section">
      <h2>Informations de l'absence</h2>
      <div class="ism-details-grid">
        <div class="ism-details-item">
          <span class="ism-details-label">Module</span>
          <span class="ism-details-value">{{ absence.module }}</span>
        </div>
        <div class="ism-details-item">
          <span class="ism-details-label">Date</span>
          <span class="ism-details-value">{{ absence.date | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="ism-details-item">
          <span class="ism-details-label">Heure</span>
          <span class="ism-details-value">{{ absence.heure }}</span>
        </div>
        <div class="ism-details-item">
          <span class="ism-details-label">Statut</span>
          <span class="ism-details-value">{{ absence.status }}</span>
        </div>
      </div>
    </div>

    <div class="ism-details-section">
      <h2>Justification</h2>
      <div class="ism-justification">
        <p>{{ absence.justification || 'Aucune justification fournie' }}</p>
      </div>
    </div>

    <div *ngIf="absence.justificatif" class="ism-details-section">
      <h2>Justificatif</h2>
      <div class="ism-justificatif">
        <a [href]="absence.justificatif" target="_blank" class="ism-download-btn">
          Télécharger le justificatif
        </a>
      </div>
    </div>

    <div class="ism-actions" *ngIf="absence.status === 'Absent'">
      <button class="ism-action-btn" (click)="validerJustification()">Valider la justification</button>
      <button class="ism-refuser-btn" (click)="refuserAbsence()">Refuser l'absence</button>
    </div>
  </div>
</div>